import{c as C,r as b,j as e,B as G}from"./index-BX5pYezm.js";import{f as A,g as I,u as S,H as F,U as H,A as P,h as M,i as B}from"./avatar-Cz4YH8uV.js";import{i as E,h as L,u as z}from"./usePlayerStats-DqFgnZgT.js";import{u as q,T as R}from"./useTourDreamTeamsBySeason-vOG4UuWQ.js";import{C as g,c as j}from"./card-Dk_rHKAv.js";import{T as U}from"./trophy-BZTyixL6.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=C("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=C("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);function Z(){const[r,N]=b.useState(null),{data:y=[]}=A(),{data:_=[]}=I(),{data:i}=E(),m=(i==null?void 0:i.stats)||[],h=(i==null?void 0:i.substitutions)||[];S();const k=s=>{const c=new Set;return h.forEach(l=>{l.original_player_id===s&&c.add(l.tour_id)}),c},u=s=>{const c=k(s);return m.filter(l=>{var a;if(l.player_id!==s)return!1;const t=(a=l.match)==null?void 0:a.tour_id;return!(t&&c.has(t))})},w=b.useMemo(()=>[...y].sort((s,c)=>{const l=u(s.id),t=u(c.id),a=l.reduce((p,x)=>p+(x.goals||0)+(x.assists||0),0),d=t.reduce((p,x)=>p+(x.goals||0)+(x.assists||0),0);if(d!==a)return d-a;const o=l.reduce((p,x)=>p+(x.goals||0),0);return t.reduce((p,x)=>p+(x.goals||0),0)-o}),[y,m,h]),f=y.find(s=>s.id===r),v=f?_.find(s=>s.id===f.team_id):null,T=s=>{switch(s){case"red":return"text-team-red";case"blue":return"text-team-blue";case"green":return"text-team-green";case"black":return"text-foreground";default:return"text-muted-foreground"}};return e.jsxs("div",{className:"min-h-screen bg-background field-pattern",children:[e.jsx(F,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:f?e.jsx(W,{player:f,team:v,onBack:()=>N(null),getTeamTextClass:T,getPlayerStats:u}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2 hero-gradient py-6",children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-foreground tracking-wide",children:[e.jsx(H,{className:"inline w-8 h-8 mr-2 text-primary"}),"–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤"]}),e.jsx("p",{className:"text-muted-foreground",children:"–°–ø–∏—Å–æ–∫ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ —Å–∏—Å—Ç–µ–º–µ –ì–æ–ª + –ü–∞—Å"})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:w.map((s,c)=>{const l=_.find(d=>d.id===s.team_id),a=u(s.id).reduce((d,o)=>d+(o.goals||0)+(o.assists||0),0);return e.jsxs(g,{className:"bg-card border-border cursor-pointer hover:border-primary/50 transition-all duration-300 hover:-translate-y-1 relative overflow-hidden",onClick:()=>N(s.id),children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-primary text-primary-foreground px-3 py-1 rounded-br-lg font-bold text-sm z-10",children:["#",c+1]}),e.jsxs(j,{className:"p-5 flex flex-col items-center text-center gap-3",children:[e.jsxs(P,{className:"h-20 w-20 border-2 border-primary/30",children:[e.jsx(M,{src:s.photo_url,alt:s.name}),e.jsx(B,{className:"text-2xl bg-primary/20 font-display",children:s.name[0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-display font-bold text-foreground tracking-wide",children:s.name}),l&&e.jsx("p",{className:`text-sm font-medium ${T(l.color)}`,children:l.name}),e.jsxs("p",{className:"text-lg font-bold text-primary mt-2",children:[a," –ì+–ü"]})]})]})]},s.id)})})]})})]})}function W({player:r,team:N,onBack:y,getTeamTextClass:_,getPlayerStats:i}){const{data:m}=E();m!=null&&m.stats;const h=(m==null?void 0:m.substitutions)||[];S();const{data:k=[]}=q(null),{data:u=[]}=L(),{data:w=[]}=A(),{data:f=[]}=z(null),v=b.useMemo(()=>{const t=new Set;return h.forEach(a=>{a.original_player_id===r.id&&t.add(a.tour_id)}),t},[h,r.id]),T=b.useMemo(()=>{let t=0;return r.team_id&&u.forEach(a=>{(a.home_team_id===r.team_id||a.away_team_id===r.team_id)&&!v.has(a.tour_id)&&t++}),h.forEach(a=>{if(a.substitute_player_id===r.id){const d=w.find(o=>o.id===a.original_player_id);if(d!=null&&d.team_id){const o=u.filter(n=>n.tour_id===a.tour_id&&(n.home_team_id===d.team_id||n.away_team_id===d.team_id));t+=o.length}}}),t},[r.id,r.team_id,u,v,h,w]),s=b.useMemo(()=>{const t=i(r.id),a=t.reduce((o,n)=>o+(n.goals||0),0),d=t.reduce((o,n)=>o+(n.assists||0),0);return{totalGoals:a,totalAssists:d,totalPoints:a+d,totalYellowCards:t.reduce((o,n)=>o+(n.yellow_cards||0),0),totalRedCards:t.reduce((o,n)=>o+(n.red_cards||0),0)}},[r.id,i]),c=b.useMemo(()=>k.filter(t=>t.player_id===r.id&&t.team_type==="dream").length,[k,r.id]),l=b.useMemo(()=>f.filter(t=>t.mvp_player_id===r.id).length,[f,r.id]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs(G,{variant:"ghost",onClick:y,className:"gap-2 font-display",children:[e.jsx($,{className:"w-4 h-4"})," –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(P,{className:"h-48 w-48 border-4 border-primary/50 shadow-2xl",children:[e.jsx(M,{src:r.photo_url,alt:r.name}),e.jsx(B,{className:"text-6xl bg-primary/20 font-display",children:r.name[0]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-display font-bold text-foreground tracking-wide",children:r.name}),N&&e.jsx("p",{className:`text-xl font-medium ${_(N.color)}`,children:N.name})]})]}),e.jsxs("div",{className:"flex-1 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(g,{className:"bg-card border-border border-primary/20 shadow-lg",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx(R,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:s.totalPoints}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-tighter",children:"–ì–æ–ª + –ü–∞—Å"})]})}),e.jsx(g,{className:"bg-card border-border",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx(V,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:T}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ò–≥—Ä"})]})}),e.jsx(g,{className:"bg-card border-border",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚öΩ"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:s.totalGoals}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ì–æ–ª—ã"})]})}),e.jsx(g,{className:"bg-card border-border",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"üÖ∞Ô∏è"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:s.totalAssists}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ü–∞—Å—ã"})]})}),e.jsx(g,{className:"bg-card border-border",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:l}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"MVP"})]})}),e.jsx(g,{className:"bg-card border-border",children:e.jsxs(j,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚≠ê"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:c}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–°–±–æ—Ä–Ω–∞—è —Ç—É—Ä–∞"})]})})]})]})]})}export{Z as default};
