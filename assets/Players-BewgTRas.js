import{c as T,r as f,j as e,B as I}from"./index-CTDFMwvo.js";import{f as A,g as E,u as C,H as G,U as H,A as P,h as M,i as S}from"./avatar-loYbL3fM.js";import{i as B,h as L,u as z}from"./usePlayerStats-q0TMpflh.js";import{u as q,T as R}from"./useTourDreamTeamsBySeason-CggsFnLp.js";import{C as u,c as h}from"./card-7fAaIBYf.js";import{T as U}from"./trophy-BMYLibfw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=T("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=T("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);function X(){const[t,p]=f.useState(null),{data:b=[]}=A(),{data:_=[]}=E(),{data:n}=B(),g=(n==null?void 0:n.stats)||[];C();const j=f.useMemo(()=>[...b].sort((r,c)=>{const i=g.filter(a=>a.player_id===r.id),m=g.filter(a=>a.player_id===c.id),k=i.reduce((a,s)=>a+(s.goals||0)+(s.assists||0),0),w=m.reduce((a,s)=>a+(s.goals||0)+(s.assists||0),0);if(w!==k)return w-k;const l=i.reduce((a,s)=>a+(s.goals||0),0);return m.reduce((a,s)=>a+(s.goals||0),0)-l}),[b,g]),x=b.find(r=>r.id===t),N=x?_.find(r=>r.id===x.team_id):null,y=r=>{switch(r){case"red":return"text-team-red";case"blue":return"text-team-blue";case"green":return"text-team-green";case"black":return"text-foreground";default:return"text-muted-foreground"}};return e.jsxs("div",{className:"min-h-screen bg-background field-pattern",children:[e.jsx(G,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:x?e.jsx(V,{player:x,team:N,onBack:()=>p(null),getTeamTextClass:y}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2 hero-gradient py-6",children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-foreground tracking-wide",children:[e.jsx(H,{className:"inline w-8 h-8 mr-2 text-primary"}),"–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤"]}),e.jsx("p",{className:"text-muted-foreground",children:"–°–ø–∏—Å–æ–∫ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ —Å–∏—Å—Ç–µ–º–µ –ì–æ–ª + –ü–∞—Å"})]}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:j.map((r,c)=>{const i=_.find(m=>m.id===r.team_id);return e.jsxs(u,{className:"bg-card border-border cursor-pointer hover:border-primary/50 transition-all duration-300 hover:-translate-y-1 relative overflow-hidden",onClick:()=>p(r.id),children:[e.jsxs("div",{className:"absolute top-0 left-0 bg-primary text-primary-foreground px-3 py-1 rounded-br-lg font-bold text-sm z-10",children:["#",c+1]}),e.jsxs(h,{className:"p-5 flex flex-col items-center text-center gap-3",children:[e.jsxs(P,{className:"h-20 w-20 border-2 border-primary/30",children:[e.jsx(M,{src:r.photo_url,alt:r.name}),e.jsx(S,{className:"text-2xl bg-primary/20 font-display",children:r.name[0]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-display font-bold text-foreground tracking-wide",children:r.name}),i&&e.jsx("p",{className:`text-sm font-medium ${y(i.color)}`,children:i.name})]})]})]},r.id)})})]})})]})}function V({player:t,team:p,onBack:b,getTeamTextClass:_}){const{data:n}=B(),g=(n==null?void 0:n.stats)||[],j=(n==null?void 0:n.substitutions)||[];C();const{data:x=[]}=q(null),{data:N=[]}=L(),{data:y=[]}=A(),{data:r=[]}=z(null),c=f.useMemo(()=>{const l=new Set;return j.forEach(o=>{o.original_player_id===t.id&&l.add(o.tour_id)}),l},[j,t.id]),i=f.useMemo(()=>{let l=0;return t.team_id&&N.forEach(o=>{(o.home_team_id===t.team_id||o.away_team_id===t.team_id)&&!c.has(o.tour_id)&&l++}),j.forEach(o=>{if(o.substitute_player_id===t.id){const a=y.find(s=>s.id===o.original_player_id);if(a!=null&&a.team_id){const s=N.filter(d=>d.tour_id===o.tour_id&&(d.home_team_id===a.team_id||d.away_team_id===a.team_id));l+=s.length}}}),l},[t.id,t.team_id,N,c,j,y]),m=f.useMemo(()=>{const l=g.filter(s=>{var v;if(s.player_id!==t.id)return!1;const d=(v=s.match)==null?void 0:v.tour_id;return!(d&&c.has(d))}),o=l.reduce((s,d)=>s+(d.goals||0),0),a=l.reduce((s,d)=>s+(d.assists||0),0);return{totalGoals:o,totalAssists:a,totalPoints:o+a,totalYellowCards:l.reduce((s,d)=>s+(d.yellow_cards||0),0),totalRedCards:l.reduce((s,d)=>s+(d.red_cards||0),0)}},[g,t.id,c]),k=f.useMemo(()=>x.filter(l=>l.player_id===t.id&&l.team_type==="dream").length,[x,t.id]),w=f.useMemo(()=>r.filter(l=>l.mvp_player_id===t.id).length,[r,t.id]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs(I,{variant:"ghost",onClick:b,className:"gap-2 font-display",children:[e.jsx($,{className:"w-4 h-4"})," –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(P,{className:"h-48 w-48 border-4 border-primary/50 shadow-2xl",children:[e.jsx(M,{src:t.photo_url,alt:t.name}),e.jsx(S,{className:"text-6xl bg-primary/20 font-display",children:t.name[0]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-display font-bold text-foreground tracking-wide",children:t.name}),p&&e.jsx("p",{className:`text-xl font-medium ${_(p.color)}`,children:p.name})]})]}),e.jsxs("div",{className:"flex-1 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(u,{className:"bg-card border-border border-primary/20 shadow-lg",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(R,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:m.totalPoints}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-tighter",children:"–ì–æ–ª + –ü–∞—Å"})]})}),e.jsx(u,{className:"bg-card border-border",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(F,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:i}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ò–≥—Ä"})]})}),e.jsx(u,{className:"bg-card border-border",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚öΩ"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:m.totalGoals}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ì–æ–ª—ã"})]})}),e.jsx(u,{className:"bg-card border-border",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"üÖ∞Ô∏è"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:m.totalAssists}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ü–∞—Å—ã"})]})}),e.jsx(u,{className:"bg-card border-border",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx(U,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:w}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"MVP"})]})}),e.jsx(u,{className:"bg-card border-border",children:e.jsxs(h,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚≠ê"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:k}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–°–±–æ—Ä–Ω–∞—è —Ç—É—Ä–∞"})]})})]})]})]})}export{X as default};
