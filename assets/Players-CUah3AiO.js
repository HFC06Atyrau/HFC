import{c as q,r as w,j as e,B as X}from"./index-Cy9nXAaZ.js";import{f as Z,g as D,u as ee,H as M,U as se,A as z,h as R,i as U}from"./avatar-BOwSJDdi.js";import{i as V,h as te,u as $}from"./usePlayerStats-Drv2OJ02.js";import{u as F,T as re}from"./useTourDreamTeamsBySeason-DcFby9Q_.js";import{C as N,c as b}from"./card-CA5z_uMM.js";import{T as ae}from"./trophy-8NqlwKn2.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=q("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=q("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);function pe(){const[n,g]=w.useState(null),{data:m=[],isLoading:P,error:u}=Z(),{data:k=[],isLoading:T,error:h}=D(),{data:i,isLoading:S,error:j}=V(),C=(i==null?void 0:i.stats)||[],d=(i==null?void 0:i.substitutions)||[];ee();const{data:y=[],isLoading:A}=F(null),{data:l=[],isLoading:x}=te(),{data:G=[],isLoading:le}=$(null),W=P||T||S,Y=u||h||j,I=s=>{const t=new Set;return d.forEach(r=>{r.original_player_id===s&&t.add(r.tour_id)}),t},B=s=>{const t=I(s);return C.filter(r=>{var a;if(r.player_id!==s)return!1;const c=(a=r.match)==null?void 0:a.tour_id;return!(c&&t.has(c))})},H=s=>{const t=m.find(a=>a.id===s),r=I(s);let c=0;return t!=null&&t.team_id&&l.forEach(a=>{(a.home_team_id===t.team_id||a.away_team_id===t.team_id)&&!r.has(a.tour_id)&&c++}),d.forEach(a=>{if(a.substitute_player_id===s){const p=m.find(_=>_.id===a.original_player_id);if(p!=null&&p.team_id){const _=l.filter(v=>v.tour_id===a.tour_id&&(v.home_team_id===p.team_id||v.away_team_id===p.team_id));c+=_.length}}}),c},J=w.useMemo(()=>m.map(t=>{const r=B(t.id),c=r.reduce((o,f)=>o+(f.goals||0),0),a=r.reduce((o,f)=>o+(f.assists||0),0),p=r.reduce((o,f)=>o+(f.yellow_cards||0),0),_=r.reduce((o,f)=>o+(f.red_cards||0),0),v=H(t.id),O=y.filter(o=>o.player_id===t.id&&o.team_type==="dream").length,Q=G.filter(o=>o.mvp_player_id===t.id).length;return{playerId:t.id,name:t.name,photo_url:t.photo_url,team_id:t.team_id,goals:c,assists:a,points:c+a,games:v,yellowCards:p,redCards:_,dreamTeamCount:O,mvpCount:Q}}).sort((t,r)=>r.points!==t.points?r.points-t.points:r.goals-t.goals),[m,C,d,l,y,G]),L=m.find(s=>s.id===n),K=L?k.find(s=>s.id===L.team_id):null,E=s=>{switch(s){case"red":return"text-team-red";case"blue":return"text-team-blue";case"green":return"text-team-green";case"black":return"text-foreground";default:return"text-muted-foreground"}};return W?e.jsxs("div",{className:"min-h-screen bg-background field-pattern",children:[e.jsx(M,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤..."})]})})]}):Y?e.jsxs("div",{className:"min-h-screen bg-background field-pattern",children:[e.jsx(M,{}),e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"text-center space-y-4 p-8 bg-destructive/10 rounded-lg border border-destructive/20",children:[e.jsx("p",{className:"text-destructive font-medium",children:"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:(u==null?void 0:u.message)||(h==null?void 0:h.message)||(j==null?void 0:j.message)||"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:"–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-background field-pattern",children:[e.jsx(M,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:L?e.jsx(oe,{player:L,team:K,onBack:()=>g(null),getTeamTextClass:E,getPlayerStats:B,getPlayerGames:H}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2 hero-gradient py-6",children:[e.jsxs("h1",{className:"text-3xl font-display font-bold text-foreground tracking-wide",children:[e.jsx(se,{className:"inline w-8 h-8 mr-2 text-primary"}),"–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤"]}),e.jsx("p",{className:"text-muted-foreground",children:"–°–ø–∏—Å–æ–∫ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ —Å–∏—Å—Ç–µ–º–µ –ì–æ–ª + –ü–∞—Å"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-primary/10 border-b-2 border-primary",children:[e.jsx("th",{className:"px-4 py-3 text-left font-bold text-foreground",children:"–ú–µ—Å—Ç–æ"}),e.jsx("th",{className:"px-4 py-3 text-left font-bold text-foreground",children:"–ò–≥—Ä–æ–∫"}),e.jsx("th",{className:"px-4 py-3 text-left font-bold text-foreground",children:"–ö–æ–º–∞–Ω–¥–∞"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"–ò–≥—Ä—ã"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"–ì–æ–ª—ã"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"–ü–∞—Å—ã"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-primary",children:"–ì+–ü"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"–ñ–ö"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"–ö–ö"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"MVP"}),e.jsx("th",{className:"px-4 py-3 text-center font-bold text-foreground",children:"‚≠ê"})]})}),e.jsx("tbody",{children:J.map((s,t)=>{const r=k.find(c=>c.id===s.team_id);return e.jsxs("tr",{className:"border-b border-border hover:bg-primary/5 transition-colors cursor-pointer",onClick:()=>g(s.playerId),children:[e.jsxs("td",{className:"px-4 py-3 font-bold text-primary",children:["#",t+1]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(z,{className:"h-10 w-10 border border-primary/30",children:[e.jsx(R,{src:s.photo_url,alt:s.name}),e.jsx(U,{className:"bg-primary/20 font-display text-sm",children:s.name[0]})]}),e.jsx("span",{className:"font-medium text-foreground",children:s.name})]})}),e.jsx("td",{className:"px-4 py-3",children:r&&e.jsx("span",{className:`font-medium ${E(r.color)}`,children:r.name})}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.games}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.goals}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.assists}),e.jsx("td",{className:"px-4 py-3 text-center font-bold text-primary text-lg",children:s.points}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.yellowCards}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.redCards}),e.jsx("td",{className:"px-4 py-3 text-center text-yellow-500 font-bold",children:s.mvpCount}),e.jsx("td",{className:"px-4 py-3 text-center text-foreground",children:s.dreamTeamCount})]},s.playerId)})})]})})]})})]})}function oe({player:n,team:g,onBack:m,getTeamTextClass:P,getPlayerStats:u,getPlayerGames:k}){V();const{data:T=[]}=F(null),{data:h=[]}=$(null),i=w.useMemo(()=>{const d=u(n.id),y=d.reduce((l,x)=>l+(x.goals||0),0),A=d.reduce((l,x)=>l+(x.assists||0),0);return{totalGoals:y,totalAssists:A,totalPoints:y+A,totalYellowCards:d.reduce((l,x)=>l+(x.yellow_cards||0),0),totalRedCards:d.reduce((l,x)=>l+(x.red_cards||0),0)}},[n.id,u]),S=k(n.id),j=w.useMemo(()=>T.filter(d=>d.player_id===n.id&&d.team_type==="dream").length,[T,n.id]),C=w.useMemo(()=>h.filter(d=>d.mvp_player_id===n.id).length,[h,n.id]);return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs(X,{variant:"ghost",onClick:m,className:"gap-2 font-display",children:[e.jsx(ne,{className:"w-4 h-4"})," –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 items-center md:items-start",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(z,{className:"h-48 w-48 border-4 border-primary/50 shadow-2xl",children:[e.jsx(R,{src:n.photo_url,alt:n.name}),e.jsx(U,{className:"text-6xl bg-primary/20 font-display",children:n.name[0]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-4xl font-display font-bold text-foreground tracking-wide",children:n.name}),g&&e.jsx("p",{className:`text-xl font-medium ${P(g.color)}`,children:g.name})]})]}),e.jsxs("div",{className:"flex-1 grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(N,{className:"bg-card border-border border-primary/20 shadow-lg",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(re,{className:"w-8 h-8 mx-auto mb-2 text-primary"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:i.totalPoints}),e.jsx("p",{className:"text-sm font-bold uppercase tracking-tighter",children:"–ì–æ–ª + –ü–∞—Å"})]})}),e.jsx(N,{className:"bg-card border-border",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(de,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:S}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ò–≥—Ä"})]})}),e.jsx(N,{className:"bg-card border-border",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚öΩ"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.totalGoals}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ì–æ–ª—ã"})]})}),e.jsx(N,{className:"bg-card border-border",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"üÖ∞Ô∏è"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:i.totalAssists}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–ü–∞—Å—ã"})]})}),e.jsx(N,{className:"bg-card border-border",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx(ae,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:C}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"MVP"})]})}),e.jsx(N,{className:"bg-card border-border",children:e.jsxs(b,{className:"p-4 text-center",children:[e.jsx("span",{className:"text-3xl block mb-1",children:"‚≠ê"}),e.jsx("p",{className:"text-3xl font-bold text-foreground",children:j}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"–°–±–æ—Ä–Ω–∞—è —Ç—É—Ä–∞"})]})})]})]})]})}export{pe as default};
