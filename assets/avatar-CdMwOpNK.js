var Fe=t=>{throw TypeError(t)};var me=(t,e,s)=>e.has(t)||Fe("Cannot "+s);var r=(t,e,s)=>(me(t,e,"read from private field"),s?s.call(t):e.get(t)),g=(t,e,s)=>e.has(t)?Fe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),f=(t,e,s,a)=>(me(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),p=(t,e,s)=>(me(t,e,"access private method"),s);import{c as W,S as ze,H as Me,I as N,J as oe,K as ee,L as ue,M as ye,N as Ae,O as ot,Q as ut,T as ct,U as Te,W as ce,Y as _e,Z as lt,r as m,$ as Ve,a as k,u as ht,w as dt,a0 as ft,j as u,a1 as Z,B as Ue,s as C,b,e as mt,i as je,k as pt,E as ge,t as Ne}from"./index-ctNZRRwa.js";import{T as yt}from"./trophy-2os8DAlU.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=W("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=W("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=W("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=W("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var R,c,te,w,U,H,F,M,se,$,B,K,P,A,z,l,X,ve,xe,be,Se,we,Ce,Re,We,$e,Ct=($e=class extends ze{constructor(e,s){super();g(this,l);g(this,R);g(this,c);g(this,te);g(this,w);g(this,U);g(this,H);g(this,F);g(this,M);g(this,se);g(this,$);g(this,B);g(this,K);g(this,P);g(this,A);g(this,z,new Set);this.options=s,f(this,R,e),f(this,M,null),f(this,F,Me()),this.options.experimental_prefetchInRender||r(this,F).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(s)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,c).addObserver(this),Ke(r(this,c),this.options)?p(this,l,X).call(this):this.updateResult(),p(this,l,Se).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ee(r(this,c),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ee(r(this,c),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,l,we).call(this),p(this,l,Ce).call(this),r(this,c).removeObserver(this)}setOptions(e){const s=this.options,a=r(this,c);if(this.options=r(this,R).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof N(this.options.enabled,r(this,c))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,l,Re).call(this),r(this,c).setOptions(this.options),s._defaulted&&!oe(this.options,s)&&r(this,R).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,c),observer:this});const n=this.hasListeners();n&&Pe(r(this,c),a,this.options,s)&&p(this,l,X).call(this),this.updateResult(),n&&(r(this,c)!==a||N(this.options.enabled,r(this,c))!==N(s.enabled,r(this,c))||ee(this.options.staleTime,r(this,c))!==ee(s.staleTime,r(this,c)))&&p(this,l,ve).call(this);const i=p(this,l,xe).call(this);n&&(r(this,c)!==a||N(this.options.enabled,r(this,c))!==N(s.enabled,r(this,c))||i!==r(this,A))&&p(this,l,be).call(this,i)}getOptimisticResult(e){const s=r(this,R).getQueryCache().build(r(this,R),e),a=this.createResult(s,e);return Et(this,a)&&(f(this,w,a),f(this,H,this.options),f(this,U,r(this,c).state)),a}getCurrentResult(){return r(this,w)}trackResult(e,s){return new Proxy(e,{get:(a,n)=>(this.trackProp(n),s==null||s(n),Reflect.get(a,n))})}trackProp(e){r(this,z).add(e)}getCurrentQuery(){return r(this,c)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const s=r(this,R).defaultQueryOptions(e),a=r(this,R).getQueryCache().build(r(this,R),s);return a.fetch().then(()=>this.createResult(a,s))}fetch(e){return p(this,l,X).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,w)))}createResult(e,s){var Qe;const a=r(this,c),n=this.options,i=r(this,w),o=r(this,U),y=r(this,H),v=e!==a?e.state:r(this,te),{state:S}=e;let d={...S},G=!1,x;if(s._optimisticResults){const j=this.hasListeners(),ae=!j&&Ke(e,s),D=j&&Pe(e,a,s,n);(ae||D)&&(d={...d,...ct(S.data,e.options)}),s._optimisticResults==="isRestoring"&&(d.fetchStatus="idle")}let{error:J,errorUpdatedAt:Y,status:O}=d;x=d.data;let re=!1;if(s.placeholderData!==void 0&&x===void 0&&O==="pending"){let j;i!=null&&i.isPlaceholderData&&s.placeholderData===(y==null?void 0:y.placeholderData)?(j=i.data,re=!0):j=typeof s.placeholderData=="function"?s.placeholderData((Qe=r(this,B))==null?void 0:Qe.state.data,r(this,B)):s.placeholderData,j!==void 0&&(O="success",x=Te(i==null?void 0:i.data,j,s),G=!0)}if(s.select&&x!==void 0&&!re)if(i&&x===(o==null?void 0:o.data)&&s.select===r(this,se))x=r(this,$);else try{f(this,se,s.select),x=s.select(x),x=Te(i==null?void 0:i.data,x,s),f(this,$,x),f(this,M,null)}catch(j){f(this,M,j)}r(this,M)&&(J=r(this,M),x=r(this,$),Y=Date.now(),O="error");const he=d.fetchStatus==="fetching",de=O==="pending",fe=O==="error",Le=de&&he,qe=x!==void 0,I={status:O,fetchStatus:d.fetchStatus,isPending:de,isSuccess:O==="success",isError:fe,isInitialLoading:Le,isLoading:Le,data:x,dataUpdatedAt:d.dataUpdatedAt,error:J,errorUpdatedAt:Y,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>v.dataUpdateCount||d.errorUpdateCount>v.errorUpdateCount,isFetching:he,isRefetching:he&&!de,isLoadingError:fe&&!qe,isPaused:d.fetchStatus==="paused",isPlaceholderData:G,isRefetchError:fe&&qe,isStale:ke(e,s),refetch:this.refetch,promise:r(this,F),isEnabled:N(s.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=ne=>{I.status==="error"?ne.reject(I.error):I.data!==void 0&&ne.resolve(I.data)},ae=()=>{const ne=f(this,F,I.promise=Me());j(ne)},D=r(this,F);switch(D.status){case"pending":e.queryHash===a.queryHash&&j(D);break;case"fulfilled":(I.status==="error"||I.data!==D.value)&&ae();break;case"rejected":(I.status!=="error"||I.error!==D.reason)&&ae();break}}return I}updateResult(){const e=r(this,w),s=this.createResult(r(this,c),this.options);if(f(this,U,r(this,c).state),f(this,H,this.options),r(this,U).data!==void 0&&f(this,B,r(this,c)),oe(s,e))return;f(this,w,s);const a=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!r(this,z).size)return!0;const o=new Set(i??r(this,z));return this.options.throwOnError&&o.add("error"),Object.keys(r(this,w)).some(y=>{const h=y;return r(this,w)[h]!==e[h]&&o.has(h)})};p(this,l,We).call(this,{listeners:a()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,l,Se).call(this)}},R=new WeakMap,c=new WeakMap,te=new WeakMap,w=new WeakMap,U=new WeakMap,H=new WeakMap,F=new WeakMap,M=new WeakMap,se=new WeakMap,$=new WeakMap,B=new WeakMap,K=new WeakMap,P=new WeakMap,A=new WeakMap,z=new WeakMap,l=new WeakSet,X=function(e){p(this,l,Re).call(this);let s=r(this,c).fetch(this.options,e);return e!=null&&e.throwOnError||(s=s.catch(ue)),s},ve=function(){p(this,l,we).call(this);const e=ee(this.options.staleTime,r(this,c));if(ye||r(this,w).isStale||!Ae(e))return;const a=ot(r(this,w).dataUpdatedAt,e)+1;f(this,K,setTimeout(()=>{r(this,w).isStale||this.updateResult()},a))},xe=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,c)):this.options.refetchInterval)??!1},be=function(e){p(this,l,Ce).call(this),f(this,A,e),!(ye||N(this.options.enabled,r(this,c))===!1||!Ae(r(this,A))||r(this,A)===0)&&f(this,P,setInterval(()=>{(this.options.refetchIntervalInBackground||ut.isFocused())&&p(this,l,X).call(this)},r(this,A)))},Se=function(){p(this,l,ve).call(this),p(this,l,be).call(this,p(this,l,xe).call(this))},we=function(){r(this,K)&&(clearTimeout(r(this,K)),f(this,K,void 0))},Ce=function(){r(this,P)&&(clearInterval(r(this,P)),f(this,P,void 0))},Re=function(){const e=r(this,R).getQueryCache().build(r(this,R),this.options);if(e===r(this,c))return;const s=r(this,c);f(this,c,e),f(this,te,e.state),this.hasListeners()&&(s==null||s.removeObserver(this),e.addObserver(this))},We=function(e){ce.batch(()=>{e.listeners&&this.listeners.forEach(s=>{s(r(this,w))}),r(this,R).getQueryCache().notify({query:r(this,c),type:"observerResultsUpdated"})})},$e);function Rt(t,e){return N(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Ke(t,e){return Rt(t,e)||t.state.data!==void 0&&Ee(t,e,e.refetchOnMount)}function Ee(t,e,s){if(N(e.enabled,t)!==!1&&ee(e.staleTime,t)!=="static"){const a=typeof s=="function"?s(t):s;return a==="always"||a!==!1&&ke(t,e)}return!1}function Pe(t,e,s,a){return(t!==e||N(a.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&ke(t,s)}function ke(t,e){return N(e.enabled,t)!==!1&&t.isStaleByTime(ee(e.staleTime,t))}function Et(t,e){return!oe(t.getCurrentResult(),e)}var T,_,E,L,q,ie,Oe,Be,Ot=(Be=class extends ze{constructor(e,s){super();g(this,q);g(this,T);g(this,_);g(this,E);g(this,L);f(this,T,e),this.setOptions(s),this.bindMethods(),p(this,q,ie).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var a;const s=this.options;this.options=r(this,T).defaultMutationOptions(e),oe(this.options,s)||r(this,T).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,E),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&_e(s.mutationKey)!==_e(this.options.mutationKey)?this.reset():((a=r(this,E))==null?void 0:a.state.status)==="pending"&&r(this,E).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(e=r(this,E))==null||e.removeObserver(this)}onMutationUpdate(e){p(this,q,ie).call(this),p(this,q,Oe).call(this,e)}getCurrentResult(){return r(this,_)}reset(){var e;(e=r(this,E))==null||e.removeObserver(this),f(this,E,void 0),p(this,q,ie).call(this),p(this,q,Oe).call(this)}mutate(e,s){var a;return f(this,L,s),(a=r(this,E))==null||a.removeObserver(this),f(this,E,r(this,T).getMutationCache().build(r(this,T),this.options)),r(this,E).addObserver(this),r(this,E).execute(e)}},T=new WeakMap,_=new WeakMap,E=new WeakMap,L=new WeakMap,q=new WeakSet,ie=function(){var s;const e=((s=r(this,E))==null?void 0:s.state)??lt();f(this,_,{...e,isPending:e.status==="pending",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset})},Oe=function(e){ce.batch(()=>{var s,a,n,i,o,y,h,v;if(r(this,L)&&this.hasListeners()){const S=r(this,_).variables,d=r(this,_).context;(e==null?void 0:e.type)==="success"?((a=(s=r(this,L)).onSuccess)==null||a.call(s,e.data,S,d),(i=(n=r(this,L)).onSettled)==null||i.call(n,e.data,null,S,d)):(e==null?void 0:e.type)==="error"&&((y=(o=r(this,L)).onError)==null||y.call(o,e.error,S,d),(v=(h=r(this,L)).onSettled)==null||v.call(h,void 0,e.error,S,d))}this.listeners.forEach(S=>{S(r(this,_))})})},Be),Ge=m.createContext(!1),jt=()=>m.useContext(Ge);Ge.Provider;function Nt(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var kt=m.createContext(Nt()),It=()=>m.useContext(kt),Lt=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},qt=t=>{m.useEffect(()=>{t.clearReset()},[t])},Qt=({result:t,errorResetBoundary:e,throwOnError:s,query:a,suspense:n})=>t.isError&&!e.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Ve(s,[t.error,a])),Ft=t=>{if(t.suspense){const e=a=>a==="static"?a:Math.max(a??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...a)=>e(s(...a)):e(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Mt=(t,e)=>t.isLoading&&t.isFetching&&!e,At=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,De=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Tt(t,e,s){var d,G,x,J,Y;const a=jt(),n=It(),i=k(),o=i.defaultQueryOptions(t);(G=(d=i.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||G.call(d,o),o._optimisticResults=a?"isRestoring":"optimistic",Ft(o),Lt(o,n),qt(n);const y=!i.getQueryCache().get(o.queryHash),[h]=m.useState(()=>new e(i,o)),v=h.getOptimisticResult(o),S=!a&&t.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(O=>{const re=S?h.subscribe(ce.batchCalls(O)):ue;return h.updateResult(),re},[h,S]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),m.useEffect(()=>{h.setOptions(o)},[o,h]),At(o,v))throw De(o,h,n);if(Qt({result:v,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw v.error;if((J=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||J.call(x,o,v),o.experimental_prefetchInRender&&!ye&&Mt(v,a)){const O=y?De(o,h,n):(Y=i.getQueryCache().get(o.queryHash))==null?void 0:Y.promise;O==null||O.catch(ue).finally(()=>{h.updateResult()})}return o.notifyOnChangeProps?v:h.trackResult(v)}function le(t,e){return Tt(t,Ct)}function Q(t,e){const s=k(),[a]=m.useState(()=>new Ot(s,t));m.useEffect(()=>{a.setOptions(t)},[a,t]);const n=m.useSyncExternalStore(m.useCallback(o=>a.subscribe(ce.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=m.useCallback((o,y)=>{a.mutate(o,y).catch(ue)},[a]);if(n.error&&Ve(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}function is(){const{user:t,isAdmin:e,isOwner:s,signOut:a}=ht(),n=dt(),i=ft(),o=async()=>{await a(),n("/")};return u.jsx("header",{className:"sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur-md supports-[backdrop-filter]:bg-background/80",children:u.jsxs("div",{className:"container mx-auto px-4 py-3 flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-6",children:[u.jsxs(Z,{to:"/",className:"flex items-center gap-2 group",children:[u.jsx("div",{className:"w-11 h-11 bg-primary/15 rounded-xl flex items-center justify-center group-hover:bg-primary/25 transition-all duration-300 group-hover:scale-105",children:u.jsx(yt,{className:"w-6 h-6 text-primary"})}),u.jsxs("span",{className:"text-xl font-display font-bold text-foreground tracking-wide",children:["HFC ",u.jsx("span",{className:"gradient-text",children:"Stats"})]})]}),u.jsxs("nav",{className:"flex items-center gap-1",children:[u.jsx(Z,{to:"/",className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${i.pathname==="/"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:"Главная"}),u.jsxs(Z,{to:"/players",className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${i.pathname==="/players"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[u.jsx(wt,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Игроки"})]}),u.jsxs(Z,{to:"/history",className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${i.pathname==="/history"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[u.jsx(gt,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"История"})]}),u.jsxs(Z,{to:"/season-teams",className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors flex items-center gap-1.5 ${i.pathname==="/season-teams"?"bg-primary/10 text-primary":"text-muted-foreground hover:text-foreground hover:bg-secondary"}`,children:[u.jsx(bt,{className:"w-4 h-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Сборные"})]})]})]}),u.jsx("div",{className:"flex items-center gap-3",children:t?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s?u.jsx(xt,{className:"w-4 h-4 text-primary"}):e?u.jsx(St,{className:"w-4 h-4 text-primary"}):null,u.jsx("span",{className:"hidden sm:inline",children:t.email}),s&&u.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Owner"}),e&&!s&&u.jsx("span",{className:"text-xs bg-primary/20 text-primary px-2 py-0.5 rounded",children:"Admin"})]}),u.jsx(Ue,{variant:"ghost",size:"sm",onClick:o,className:"text-muted-foreground hover:text-foreground",children:u.jsx(vt,{className:"w-4 h-4"})})]}):u.jsx(Ue,{variant:"outline",size:"sm",onClick:()=>n("/auth"),className:"border-primary/50 text-primary hover:bg-primary hover:text-primary-foreground",children:"Войти"})})]})})}function os(){return le({queryKey:["seasons"],queryFn:async()=>{const{data:t,error:e}=await C.from("seasons").select("*").order("created_at",{ascending:!1});if(e)throw e;return t}})}function us(){return le({queryKey:["current-season"],queryFn:async()=>{const{data:t,error:e}=await C.from("seasons").select("*").eq("is_current",!0).maybeSingle();if(e)throw e;return t}})}function cs(){const t=k();return Q({mutationFn:async(e="Новый сезон")=>{await C.from("seasons").update({is_current:!1}).eq("is_current",!0);const{data:s,error:a}=await C.from("seasons").insert({name:e,is_current:!0}).select().single();if(a)throw a;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["seasons"]}),t.invalidateQueries({queryKey:["current-season"]}),b.success("Сезон создан")},onError:e=>{b.error(e.message)}})}function ls(){const t=k();return Q({mutationFn:async({id:e,name:s})=>{const{data:a,error:n}=await C.from("seasons").update({name:s}).eq("id",e).select().single();if(n)throw n;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["seasons"]}),t.invalidateQueries({queryKey:["current-season"]}),b.success("Название сезона обновлено")},onError:e=>{b.error(e.message)}})}function hs(){const t=k();return Q({mutationFn:async e=>{await C.from("seasons").update({is_current:!1}).eq("is_current",!0);const{data:s,error:a}=await C.from("seasons").update({is_current:!0}).eq("id",e).select().single();if(a)throw a;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["seasons"]}),t.invalidateQueries({queryKey:["current-season"]}),b.success("Текущий сезон изменён")},onError:e=>{b.error(e.message)}})}function ds(){return le({queryKey:["players"],queryFn:async()=>{const{data:t,error:e}=await C.from("players").select("*, teams(name)").order("name");if(e)throw e;return t}})}function fs(){const t=k();return Q({mutationFn:async({name:e,teamId:s})=>{const{data:a,error:n}=await C.from("players").insert({name:e,team_id:s}).select().single();if(n)throw n;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["players"]}),b.success("Игрок добавлен")},onError:e=>{b.error(e.message)}})}function ms(){const t=k();return Q({mutationFn:async({id:e,teamId:s})=>{const{data:a,error:n}=await C.from("players").update({team_id:s}).eq("id",e).select().single();if(n)throw n;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["players"]}),b.success("Команда игрока обновлена")},onError:e=>{b.error(e.message)}})}function ps(){const t=k();return Q({mutationFn:async e=>{const{error:s}=await C.from("players").delete().eq("id",e);if(s)throw s},onSuccess:()=>{t.invalidateQueries({queryKey:["players"]}),b.success("Игрок удалён")},onError:e=>{b.error(e.message)}})}function ys(){return le({queryKey:["teams"],queryFn:async()=>{const{data:t,error:e}=await C.from("teams").select("*").order("name");if(e)throw e;return t}})}function gs(){const t=k();return Q({mutationFn:async e=>{const{data:s,error:a}=await C.from("teams").insert({name:e}).select().single();if(a)throw a;return s},onSuccess:()=>{t.invalidateQueries({queryKey:["teams"]}),b.success("Команда создана")},onError:e=>{b.error(e.message)}})}function vs(){const t=k();return Q({mutationFn:async({id:e,color:s})=>{const{data:a,error:n}=await C.from("teams").update({color:s}).eq("id",e).select().single();if(n)throw n;return a},onSuccess:()=>{t.invalidateQueries({queryKey:["teams"]}),t.invalidateQueries({queryKey:["tour-teams"]}),b.success("Цвет команды обновлён")},onError:e=>{b.error(e.message)}})}function xs(){const t=k();return Q({mutationFn:async e=>{const{error:s}=await C.from("teams").delete().eq("id",e);if(s)throw s},onSuccess:()=>{t.invalidateQueries({queryKey:["teams"]}),b.success("Команда удалена")},onError:e=>{b.error(e.message)}})}var Je={exports:{}},Ye={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V=m;function _t(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ut=typeof Object.is=="function"?Object.is:_t,Kt=V.useState,Pt=V.useEffect,Dt=V.useLayoutEffect,Ht=V.useDebugValue;function $t(t,e){var s=e(),a=Kt({inst:{value:s,getSnapshot:e}}),n=a[0].inst,i=a[1];return Dt(function(){n.value=s,n.getSnapshot=e,pe(n)&&i({inst:n})},[t,s,e]),Pt(function(){return pe(n)&&i({inst:n}),t(function(){pe(n)&&i({inst:n})})},[t]),Ht(s),s}function pe(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!Ut(t,s)}catch{return!0}}function Bt(t,e){return e()}var zt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bt:$t;Ye.useSyncExternalStore=V.useSyncExternalStore!==void 0?V.useSyncExternalStore:zt;Je.exports=Ye;var Vt=Je.exports;function Wt(){return Vt.useSyncExternalStore(Gt,()=>!0,()=>!1)}function Gt(){return()=>{}}var Ie="Avatar",[Jt,bs]=mt(Ie),[Yt,Ze]=Jt(Ie),Xe=m.forwardRef((t,e)=>{const{__scopeAvatar:s,...a}=t,[n,i]=m.useState("idle");return u.jsx(Yt,{scope:s,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:u.jsx(je.span,{...a,ref:e})})});Xe.displayName=Ie;var et="AvatarImage",tt=m.forwardRef((t,e)=>{const{__scopeAvatar:s,src:a,onLoadingStatusChange:n=()=>{},...i}=t,o=Ze(et,s),y=Zt(a,i),h=pt(v=>{n(v),o.onImageLoadingStatusChange(v)});return ge(()=>{y!=="idle"&&h(y)},[y,h]),y==="loaded"?u.jsx(je.img,{...i,ref:e,src:a}):null});tt.displayName=et;var st="AvatarFallback",rt=m.forwardRef((t,e)=>{const{__scopeAvatar:s,delayMs:a,...n}=t,i=Ze(st,s),[o,y]=m.useState(a===void 0);return m.useEffect(()=>{if(a!==void 0){const h=window.setTimeout(()=>y(!0),a);return()=>window.clearTimeout(h)}},[a]),o&&i.imageLoadingStatus!=="loaded"?u.jsx(je.span,{...n,ref:e}):null});rt.displayName=st;function He(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Zt(t,{referrerPolicy:e,crossOrigin:s}){const a=Wt(),n=m.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[o,y]=m.useState(()=>He(i,t));return ge(()=>{y(He(i,t))},[i,t]),ge(()=>{const h=d=>()=>{y(d)};if(!i)return;const v=h("loaded"),S=h("error");return i.addEventListener("load",v),i.addEventListener("error",S),e&&(i.referrerPolicy=e),typeof s=="string"&&(i.crossOrigin=s),()=>{i.removeEventListener("load",v),i.removeEventListener("error",S)}},[i,s,e]),o}var at=Xe,nt=tt,it=rt;const Xt=m.forwardRef(({className:t,...e},s)=>u.jsx(at,{ref:s,className:Ne("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Xt.displayName=at.displayName;const es=m.forwardRef(({className:t,...e},s)=>u.jsx(nt,{ref:s,className:Ne("aspect-square h-full w-full",t),...e}));es.displayName=nt.displayName;const ts=m.forwardRef(({className:t,...e},s)=>u.jsx(it,{ref:s,className:Ne("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));ts.displayName=it.displayName;export{Xt as A,is as H,xt as S,wt as U,us as a,cs as b,ls as c,hs as d,Q as e,ds as f,ys as g,es as h,ts as i,vs as j,le as k,gs as l,xs as m,fs as n,ps as o,ms as p,gt as q,bt as r,os as u};
